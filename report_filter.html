<html>
<head>
    <title>Sales Report Filter</title>
    <style>
        *{
            box-sizing: border-box;
        }
        body{
            margin: 0;
            padding: 0;
            font-family: Arial, Helvetica, sans-serif;
            background-color: #f4f5fb;
        }
        h1{
            width: 900px;
            margin: 20px auto 10px;
            font-size: 26px;
            color: #111827;
        }
        #box{
            width: 900px;
            background-color: #ffffff;
            padding: 20px 30px;
            margin: 10px auto 30px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(15,23,42,0.08);
        }
        fieldset{
            border: none;
            padding: 10px 0;
            margin: 0;
        }
        legend{
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        table{
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td{
            padding: 10px 12px;
            text-align: left;
            vertical-align: middle;
        }
        select{
            width: 250px;
            height: 34px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 4px 8px;
            background-color: #ffffff;
            font-size: 14px;
        }
        input[type="date"]{
            width: 200px;
            height: 30px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 4px 8px;
            background-color: #ffffff;
            font-size: 14px;
        }
        input[type="submit"], input[type="button"]{
            padding: 8px 18px;
            border-radius: 6px;
            border: none;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-right: 8px;
            margin-top: 8px;
        }
        #genButton{
            background-color: #2563eb;
            color: #ffffff;
        }
        #printButton{
            background-color: #e5e7eb;
            color: #111827;
        }
        input[type="submit"]:hover, input[type="button"]:hover{
            filter: brightness(0.95);
        }
        p{
            margin: 4px 0 0 0;
            font-size: 12px;
            color: #6b7280;
        }
    </style>
</head>
<body>
    <h1>Sales Report</h1>

    <div id="box">
        <form action="" method="" enctype="" id="filterForm" onsubmit="return generateReport()">
            <fieldset>
                <legend>Filter</legend>
                <table>
                    <tr>
                        <td colspan="4">Select a date range to generate the sales report.</td>
                    </tr>
                    <tr>
                        <td>Quick Range</td>
                        <td>
                            <select id="quickRange" name="quickRange" onchange="setDatesFromQuickRange()">
                                <option value="">Select</option>
                                <option value="today">Today</option>
                                <option value="yesterday">Yesterday</option>
                                <option value="thisweek">This Week</option>
                                <option value="thismonth">This Month</option>
                            </select>
                        </td>
                        <td>From Date</td>
                        <td>
                            <input type="date" id="fromDate" name="fromDate" onblur="testFromDate()">
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><p id="fError"></p></td>
                        <td>To Date</td>
                        <td>
                            <input type="date" id="toDate" name="toDate" onblur="testToDate()">
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td><p id="tError"></p></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            <input type="submit" id="genButton" name="" value="Generate Report">
                            <input type="button" id="printButton" name="" value="Print Report" onclick="printReport()">
                        </td>
                        <td></td>
                        <td></td>
                    </tr>
                </table>
            </fieldset>
        </form>
    </div>

    <script>
        let fError = document.getElementById('fError');
        let tError = document.getElementById('tError');

        function formatDate(d){
            let y = d.getFullYear();
            let m = d.getMonth()+1;
            let day = d.getDate();
            if(m < 10){
                m = "0"+m;
            }
            if(day < 10){
                day = "0"+day;
            }
            return y+"-"+m+"-"+day;
        }

        function setDatesFromQuickRange(){
            let range = document.getElementById('quickRange').value;
            let fromInput = document.getElementById('fromDate');
            let toInput = document.getElementById('toDate');
            let today = new Date();
            if(range == "today"){
                let d = formatDate(today);
                fromInput.value = d;
                toInput.value = d;
            }else if(range == "yesterday"){
                let y = new Date();
                y.setDate(y.getDate()-1);
                let d = formatDate(y);
                fromInput.value = d;
                toInput.value = d;
            }else if(range == "thisweek"){
                let start = new Date();
                start.setDate(today.getDate()-6);
                fromInput.value = formatDate(start);
                toInput.value = formatDate(today);
            }else if(range == "thismonth"){
                let start = new Date(today.getFullYear(), today.getMonth(), 1);
                fromInput.value = formatDate(start);
                toInput.value = formatDate(today);
            }
        }

        function testFromDate(){
            let from = document.getElementById('fromDate').value;
            let to = document.getElementById('toDate').value;
            if(from == ""){
                fError.innerHTML = "please select from date!";
                fError.style.color = 'red';
            }else if(to !== "" && from > to){
                fError.innerHTML = "from date cannot be after to date!";
                fError.style.color = 'red';
            }else{
                fError.innerHTML = "";
            }
        }

        function testToDate(){
            let to = document.getElementById('toDate').value;
            let from = document.getElementById('fromDate').value;
            if(to == ""){
                tError.innerHTML = "please select to date!";
                tError.style.color = 'red';
            }else if(from !== "" && from > to){
                tError.innerHTML = "to date cannot be before from date!";
                tError.style.color = 'red';
            }else{
                tError.innerHTML = "";
            }
        }

        function saveReportDates(){
            let from = document.getElementById('fromDate').value;
            let to = document.getElementById('toDate').value;
            let range = document.getElementById('quickRange').value;
            localStorage.setItem('reportFromDate', from);
            localStorage.setItem('reportToDate', to);
            localStorage.setItem('reportQuickRange', range);
        }

        function generateReport(){
            testFromDate();
            testToDate();
            if(fError.innerHTML !== "" || tError.innerHTML !== ""){
                return false;
            }else{
                saveReportDates();
                window.location.href = "report_summary.html";
                return false;
            }
        }

        function printReport(){
            generateReport();
        }

        let storedFrom = localStorage.getItem('reportFromDate');
        let storedTo = localStorage.getItem('reportToDate');
        if(storedFrom != null && storedFrom !== ""){
            document.getElementById('fromDate').value = storedFrom;
        }
        if(storedTo != null && storedTo !== ""){
            document.getElementById('toDate').value = storedTo;
        }
    </script>
</body>
</html>